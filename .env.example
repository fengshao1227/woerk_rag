# RAG Knowledge Base System - Environment Configuration
# Copy this file to .env and fill in your values

# ==============================================================================
# LLM Configuration
# ==============================================================================

# LLM Provider: anthropic | openai
LLM_PROVIDER=anthropic

# Model name
LLM_MODEL=claude-3-5-haiku-20241022

# Anthropic API Configuration
ANTHROPIC_API_KEY=your_anthropic_api_key_here
ANTHROPIC_API_BASE=https://api.anthropic.com
# For third-party API providers, change the base URL:
# ANTHROPIC_API_BASE=https://api.ohmygpt.com

# OpenAI API Configuration (if using OpenAI provider)
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_API_BASE=https://api.openai.com/v1

# ==============================================================================
# Qdrant Vector Database Configuration
# ==============================================================================

QDRANT_HOST=localhost
QDRANT_PORT=6333
QDRANT_API_KEY=
QDRANT_USE_HTTPS=false
QDRANT_COLLECTION_NAME=rag_knowledge

# ==============================================================================
# MySQL Database Configuration (for Admin Panel)
# ==============================================================================

MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_USER=root
MYSQL_PASSWORD=your_mysql_password
MYSQL_DATABASE=rag_admin

# ==============================================================================
# Embedding Model Configuration
# ==============================================================================

# Embedding provider: "api" (recommended) | "local"
# - api: 使用 OpenAI 格式的 Embedding API（推荐，无需本地模型）
# - local: 使用本地 SentenceTransformer 模型（需要下载 ~2GB 模型）
EMBEDDING_PROVIDER=api

# For API mode:
EMBEDDING_API_KEY=your_embedding_api_key
EMBEDDING_API_BASE=https://api.openai.com
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIM=1536

# For local mode (if EMBEDDING_PROVIDER=local):
# EMBEDDING_MODEL=BAAI/bge-m3
# EMBEDDING_DEVICE=cpu
# EMBEDDING_DIM=1024

# ==============================================================================
# Reranker Configuration
# ==============================================================================

# Enable reranker (1=enabled, 0=disabled)
RERANKER_ENABLE=1

# Reranker model
RERANKER_MODEL=BAAI/bge-reranker-base

# ==============================================================================
# Retrieval Configuration
# ==============================================================================

# Number of results to return
TOP_K=5

# Text chunking settings
CHUNK_SIZE=512
CHUNK_OVERLAP=50

# ==============================================================================
# Logging Configuration
# ==============================================================================

# Log level: DEBUG | INFO | WARNING | ERROR
LOG_LEVEL=INFO

# ==============================================================================
# JWT Authentication Configuration
# ==============================================================================

# JWT secret key (generate a strong random string for production)
JWT_SECRET_KEY=your-super-secret-key-change-in-production

# JWT expiration time in hours
JWT_EXPIRE_HOURS=24

# ==============================================================================
# Project Configuration
# ==============================================================================

# Project root for indexing (optional, defaults to current directory)
PROJECT_ROOT=

# File patterns to ignore during indexing
IGNORE_PATTERNS=__pycache__,*.pyc,.git,node_modules,venv,.env,*.log

# ==============================================================================
# Scheduled Indexing Configuration (定时索引调度器)
# ==============================================================================

# Enable scheduled indexing (1=enabled, 0=disabled)
# 启用定时索引调度器（默认关闭，设为 1 开启）
SCHEDULER_ENABLE=0

# Indexing interval in minutes (default: 60)
# 索引间隔时间（分钟）
SCHEDULER_INTERVAL_MINUTES=60

# Index code files (1=yes, 0=no)
# 是否索引代码文件
SCHEDULER_INDEX_CODE=1

# Index document files (1=yes, 0=no)
# 是否索引文档文件
SCHEDULER_INDEX_DOCS=1

# Run indexing immediately on startup (1=yes, 0=no)
# 服务启动时立即执行一次索引
SCHEDULER_INDEX_ON_STARTUP=0
